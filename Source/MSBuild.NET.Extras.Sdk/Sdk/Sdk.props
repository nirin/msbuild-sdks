<Project>

	<PropertyGroup Label="Globals">
		<!--
			Indicate to other targets that 'MSBuild.NET.Extras.Sdk' is being used.
			This must be set here (as early as possible, before Common props)
			so that everything that follows can depend on it.

			In particular, 'Directory.Build.props' and 'Directory.Packages.props'
			are imported by Common props. They need to be able to use the
			following flag (property) to enable build customization.
		-->
		<UsingMSBuildNETExtrasSdk>true</UsingMSBuildNETExtrasSdk>
	</PropertyGroup>

	<!--
		Detect the SDK version. For now, we have to check the 'NETCoreSdkVersion'
		else check 'BundledNETCoreAppTargetFrameworkVersion' property for Sdk <= 2.1.200
		else Give 1.0 version since that property doesn't exist in 1.x Sdks
	-->
	<PropertyGroup>
		<!--  Handle SemVer version like 3.1.300-preview and 2.1.200, since MSBuild compares only first 2 version parts. -->
		<NETSdkVersion Condition="$(NETCoreSdkVersion.Contains('.'))">$(NETCoreSdkVersion.Split('.')[0]).$(NETCoreSdkVersion.Split('.')[1])</NETSdkVersion>
		<NETSdkVersion Condition="'$(NETSdkVersion)' == ''">$(BundledNETCoreAppTargetFrameworkVersion)</NETSdkVersion>
		<NETSdkVersion Condition="'$(NETSdkVersion)' == ''">1.0</NETSdkVersion>
	</PropertyGroup>

	<PropertyGroup>
		<_DotNetWorkaroundsProps>$(MSBuildThisFileDirectory)..\Extensions\MSBuild.NET.Workarounds.props</_DotNetWorkaroundsProps>
		<CustomBeforeMicrosoftCommonProps>$(_DotNetWorkaroundsProps)</CustomBeforeMicrosoftCommonProps>
		<CustomBeforeMicrosoftCommonCrossTargetingProps>$(_DotNetWorkaroundsProps)</CustomBeforeMicrosoftCommonCrossTargetingProps>
	</PropertyGroup>

	<Import Sdk="Microsoft.NET.Sdk" Project="Sdk.props"/>

	<Import Project="..\Build\MSBuild.NET.Extras.Sdk.props"/>
	<Import Project="..\DefaultItems\MSBuild.NET.ImplicitPackages.props"/>

</Project>
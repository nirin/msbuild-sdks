<Project>

	<PropertyGroup>
		<ImportNuGetRestoreTargetsFromSdk Condition="'$(ImportNuGetRestoreTargetsFromSdk)' == ''">true</ImportNuGetRestoreTargetsFromSdk>
	</PropertyGroup>

	<!-- Import `NuGet.targets` (required for `GetReferenceNearestTargetFrameworkTask` and used for Restore functionality) -->
	<PropertyGroup Condition="'$(ImportNuGetRestoreTargetsFromSdk)' == 'false'">
		<MSBuildUseVisualStudioDirectoryLayout Condition="'$(MSBuildUseVisualStudioDirectoryLayout)' == ''">$([MSBuild]::IsRunningFromVisualStudio())</MSBuildUseVisualStudioDirectoryLayout>
		<DevEnvDir Condition="'$(DevEnvDir)' == '' AND '$(MSBuildUseVisualStudioDirectoryLayout)' == 'true'">$(MSBuildToolsPath32)\..\..\..\Common7\IDE\</DevEnvDir>
		<NuGetRestoreTargets Condition="'$(NuGetRestoreTargets)' == '' AND '$(MSBuildUseVisualStudioDirectoryLayout)' == 'true'">$(DevEnvDir)CommonExtensions\Microsoft\NuGet\NuGet.targets</NuGetRestoreTargets>
		<NuGetRestoreTargets Condition="'$(NuGetRestoreTargets)' == ''">$(MSBuildToolsPath)\NuGet.targets</NuGetRestoreTargets>
	</PropertyGroup>

	<!-- This will import NuGet restore targets. We need restore to work before any package assets are available. -->
	<Import Project="$(NuGetRestoreTargets)" Condition="'$(ImportNuGetRestoreTargetsFromSdk)' == 'false' AND Exists('$(NuGetRestoreTargets)')"/>

	<Import Project="Sdk.Restore.targets" Sdk="NuGet.Packaging.Sdk" Condition="'$(ImportNuGetRestoreTargetsFromSdk)' == 'true'"/>

</Project>